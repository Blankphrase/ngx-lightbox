!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("mousetrap"),require("rxjs/internal/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@balticcode/ngx-hotkeys",["exports","@angular/core","rxjs","mousetrap","rxjs/internal/operators","@angular/common"],t):t((e.balticcode=e.balticcode||{},e.balticcode["ngx-hotkeys"]={}),e.ng.core,e.rxjs,null,e.rxjs["internal/operators"],e.ng.common)}(this,function(e,o,t,n,i,s){"use strict";var r=new o.InjectionToken("HotkeyOptions"),a={disableCheatSheet:!1,cheatSheetTitle:"Keyboard Shortcuts:",cheatSheetHotkey:"?",cheatSheetHotkeyDescription:"Show / hide this help menu",cheatSheetCloseEsc:!1,cheatSheetCloseEscDescription:"Hide this help menu"},h=function(){function e(e){this._options=e,this._registeredHotkeys=new Set,this._pausedHotkeys=new Set,this._cheatSheetToggled=new t.Subject,this._preventIn=["INPUT","SELECT","TEXTAREA"],this._serviceOptions=Object.assign(a,this._options),Mousetrap.prototype.stopCallback=function(e,t,o,n){return!(-1<(" "+t.className+" ").indexOf(" mousetrap "))&&(t.contentEditable&&"true"===t.contentEditable)},this._mousetrapInstance=new Mousetrap,this._serviceOptions.disableCheatSheet||this.register({combo:this._serviceOptions.cheatSheetHotkey,handler:function(e){this._cheatSheetToggled.next()}.bind(this),description:this._serviceOptions.cheatSheetHotkeyDescription}),this._serviceOptions.cheatSheetCloseEsc&&this.register({combo:"esc",handler:function(e){this._cheatSheetToggled.next(!1)}.bind(this),allowIn:["HOTKEYS-CHEATSHEET"],description:this._serviceOptions.cheatSheetCloseEscDescription})}return Object.defineProperty(e.prototype,"hotkeys",{get:function(){return Array.from(this._registeredHotkeys)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cheatSheetToggled",{get:function(){return this._cheatSheetToggled.asObservable().pipe(i.share())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._serviceOptions},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t){var o=this;void 0===t&&(t=!1);var n=[].concat(e);t&&(n=Array.from(this._pausedHotkeys)),n.forEach(function(e){t&&o._pausedHotkeys["delete"](e),o._registeredHotkeys.add(e),o.bindToMoustrap(e)})},e.prototype.unregister=function(e,t){var o=this;void 0===t&&(t=!1),[].concat(e).forEach(function(e){o._registeredHotkeys["delete"](e),t&&o._pausedHotkeys.add(e),o._mousetrapInstance.unbind(e.combo,e.specificEvent)})},e.prototype.get=function(t){return this.hotkeys.filter(function(e){return e.combo===t})},e.prototype.pause=function(e){if(!e)return this.pause(this.hotkeys);var t=[].concat(e);this.unregister(t,!0)},e.prototype.unpause=function(e){if(!e)return this.unpause(this.hotkeys);var t=[].concat(e);this.register(t,!0)},e.prototype.reset=function(){this._mousetrapInstance.reset(),this._registeredHotkeys.clear(),this._pausedHotkeys.clear()},e.prototype.ngOnDestroy=function(){this.reset()},e.prototype.bindToMoustrap=function(s){var r=this;this._mousetrapInstance.bind(s.combo,function(e,t){var o=!0;if(e){var n=e.target||e.srcElement,i=n.nodeName.toUpperCase();-1<(" "+n.className+" ").indexOf(" mousetrap ")?o=!0:-1<r._preventIn.indexOf(i)&&-1===s.allowIn.map(function(e){return e.toUpperCase()}).indexOf(i)&&(o=!1)}if(o)return s.handler.apply(r,[e,t])},s.specificEvent)},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:o.Inject,args:[r]}]}]},e}();function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],o=0;return t?t.call(e):{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}}var c=function(){function e(e,t){this._hotkeysService=e,this._elementRef=t,this._hotkeysList=[],this._oldHotkeys=[],this._mousetrapInstance=new Mousetrap(this._elementRef.nativeElement)}return e.prototype.ngOnInit=function(){try{for(var e=p(this.hotkeys),t=e.next();!t.done;t=e.next()){var o=t.value,n=Object.keys(o)[0],i={combo:n,handler:o[n]},s=this._hotkeysService.get(n),r=s&&s.length?s[0]:null;null!==r&&(this._oldHotkeys.push(r),this._hotkeysService.unregister(r)),this._hotkeysList.push(i),this._mousetrapInstance.bind(i.combo,i.handler)}}catch(c){a={error:c}}finally{try{t&&!t.done&&(h=e["return"])&&h.call(e)}finally{if(a)throw a.error}}var a,h},e.prototype.ngOnDestroy=function(){try{for(var e=p(this._hotkeysList),t=e.next();!t.done;t=e.next()){var o=t.value;this._mousetrapInstance.unbind(o.combo)}}catch(s){n={error:s}}finally{try{t&&!t.done&&(i=e["return"])&&i.call(e)}finally{if(n)throw n.error}}var n,i;this._hotkeysService.register(this._oldHotkeys)},e.decorators=[{type:o.Directive,args:[{selector:"[ngxHotkeys]",providers:[h]}]}],e.ctorParameters=function(){return[{type:h},{type:o.ElementRef}]},e.propDecorators={hotkeys:[{type:o.Input}]},e}(),l=function(){function e(e){this.hotkeysService=e,this.helpVisible=!1,this._map={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓","return":"⏎",backspace:"⌫"},this.title=this.hotkeysService.options.cheatSheetTitle}return e.prototype.ngOnInit=function(){var t=this;this._subscription=this.hotkeysService.cheatSheetToggled.subscribe(function(e){!1!==e&&(t.hotkeys=t.hotkeysService.hotkeys.filter(function(e){return e.description})),!1===e?t.helpVisible=!1:t.toggleCheatSheet()})},e.prototype.formatHotkey=function(e){if(!e.format){for(var t=(Array.isArray(e.combo)?e.combo[0]:e.combo).split(/[\s]/),o=0;o<t.length;o++)t[o]=this.symbolize(t[o]);e.format=t}return e.format},e.prototype.symbolize=function(e){for(var t=e.split("+"),o=0;o<t.length;o++)"mod"===t[o]&&(window.navigator&&0<=window.navigator.platform.indexOf("Mac")?t[o]="command":t[o]="ctrl"),t[o]=this._map[t[o]]||t[o];return t.join(" + ")},e.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},e.prototype.toggleCheatSheet=function(){this.helpVisible=!this.helpVisible},e.decorators=[{type:o.Component,args:[{selector:"ngx-cheatsheet",template:'<div class="ngx-cheatsheet fade" [ngClass]="{\'in\': helpVisible}" style="display:none">\n  <div class="ngx-cheatsheet__hotkeys">\n    <h4 class="ngx-cheatsheet__hotkeys__title">{{ title }}</h4>\n    <table>\n      <tbody>\n      <tr *ngFor="let hotkey of hotkeys">\n        <td class="ngx-cheatsheet__hotkeys__keys">\n          <span class="ngx-cheatsheet__hotkeys__keys__key">{{ formatHotkey(hotkey) }}</span>\n        </td>\n        <td class="ngx-cheatsheet__hotkeys__keys__text">{{ hotkey.description }}</td>\n      </tr>\n      </tbody>\n    </table>\n    <div class="ngx-cheatsheet__hotkeys__close" (click)="toggleCheatSheet()">&#215;</div>\n  </div>\n</div>\n',styles:[".ngx-cheatsheet{display:table!important;position:fixed;width:100%;height:100%;top:0;left:0;color:#333;font-size:1em;background-color:rgba(255,255,255,.9)}.ngx-cheatsheet.fade{z-index:-1024;visibility:hidden;opacity:0;transition:opacity .15s linear}.ngx-cheatsheet.fade.in{z-index:10002;visibility:visible;opacity:1}.ngx-cheatsheet__hotkeys{width:100%;height:100%;display:table-cell;vertical-align:middle}.ngx-cheatsheet__hotkeys__title{font-weight:700;text-align:center;font-size:1.2em}.ngx-cheatsheet__hotkeys table{margin:auto;color:#333}.ngx-cheatsheet__hotkeys__keys{padding:5px;text-align:right}.ngx-cheatsheet__hotkeys__keys__key{display:inline-block;color:#fff;background-color:#333;border:1px solid #333;border-radius:5px;text-align:center;margin-right:5px;box-shadow:inset 0 1px 0 #666,0 1px 0 #bbb;padding:5px 9px;font-size:1em}.ngx-cheatsheet__hotkeys__keys__text{padding-left:10px;font-size:1em}.ngx-cheatsheet__hotkeys__close{position:fixed;top:20px;right:20px;font-size:2em;font-weight:700;padding:5px 10px;border:1px solid #ddd;border-radius:5px;min-height:45px;min-width:45px;text-align:center}@media all and (max-width:500px){.ngx-cheatsheet__hotkeys{font-size:.8em}}@media all and (min-width:750px){.ngx-cheatsheet__hotkeys{font-size:1.2em}}"]}]}],e.ctorParameters=function(){return[{type:h}]},e.propDecorators={title:[{type:o.Input}]},e}(),d=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[h,{provide:r,useValue:e}]}},t.decorators=[{type:o.NgModule,args:[{imports:[s.CommonModule],declarations:[l,c],exports:[c,l],providers:[h]}]}],t}();e.NgxHotkeysService=h,e.NgxHotkeysDirective=c,e.NgxCheatsheetComponent=l,e.NgxHotkeysModule=d,e.ɵa=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=balticcode-ngx-hotkeys.umd.min.js.map